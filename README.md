
<div align="center">
  <h1> 排程議題與方法基礎概念介紹 📅</h1>
  <p align="center">
    ✍️ <a href="https://hackmd.io/@pputzh5cRhi6gZI0csfiyA/H1ejIyxHR"> 作者: 鄭永誠</a> • 
    ✉️ <a href="mailto:jason0304050607@gmail.com">信箱</a> • 
    🧑‍🤝‍🧑 <a href="https://www.dalabx.com.tw//"> 合作夥伴: 紫式大數據決策 </a> • 
    👫 <a href="https://moraleai.com/"> 我的朋朋: Morale AI </a> 
  </p>
</div>
<br/>

本文章將會帶你了解什麼是排程與派工(scheduling and dispatching)，  
除了希望讓你具備最基礎的概念外，  
也會同時介紹我們要如何利用演算法、啟發式演算法來解決排程相關對應問題，  
都會以最簡單的例子開始一步步讓你

內容會包含:
- 排程在做什麼?
- 為什麼會需要用演算法去求解?
- 實務狀況排程可能會考量哪些項目?
- 排程模組應如何規劃設計?

額外會補充:
- 生管基礎概念，主排程(MPS)、物料需求計畫(MRP)、排程(Scheduling)、派工(Dispaching)等概念
- 排程實務面臨挑戰和狀況
- 其他解決方案，系統模擬(Simulation)、數學規劃(Mathematical Programming)、啟發式演算法、rule-based、強化學習
--------------------------
## 簡介
排程規劃，最最最核心概念其實就是在決定<span style="color:Navy"><strong>工作順序</strong></span> 與 <span style="color:Navy"><strong>資源分配</strong></span>  
而要達成的最最最基本目標就是<span style="color:Navy"><strong>滿足交期</strong></span> (在目標時間內完成)  

你可以想像你要負責煮晚餐，必須要趕在7點上飯菜，  
必須要完成煮飯跟炒菜兩件事。  

這個時候，  
你會選擇先把米洗好放到電鍋去蒸還是會先去炒菜呢?
一般情況應該會是先去洗米蒸飯、再炒菜，因為蒸飯要的時間很久，
你如果先炒菜的話，米飯可能會趕不上7點需求






--------------------------
## 排程資料基本名詞

注意，不同系統、產業用詞可能會有所出入，
此部份只列出最基本的使用名詞

### 常見基本欄位名稱

- **工單號/製令 (work order)** :  
每張工單的基本編號，為唯一值，代表一個要生產需求  
工單可以進一步分成：<span style="color:Brown">MPS工單 (主生產排程工單)</span>，即根據預測和計劃需求生成的訂單；<span style="color:Brown">WIP工單 (在製品工單)</span>，即已經進入生產過程中的工單。這些分類將在後續部分進一步解釋。

- **料號 (material number)** :  
生產的產品類型，即生產的種類，可能是成品料號 (最終成品，像是手機) 或是半成品料號 (廠內製造的半成品，像是手機內印刷電路板)  
成品料號通常用於最終交付給客戶的產品，而半成品料號則是在生產過程中進一步加工或組裝的中間產品。

- **交期/計畫出貨時間 (Due Date / Planned Shipment Date)** :  
該工單預期需要完成的時間，是計劃生產和出貨的重要依據，影響到生產優先順序的決定，並對應到客戶的需求交期。  

- **生產數量/單位 (Production Quantity / Unit)** :  
生產數量是指工單要求生產的特定料號的數量，通常會以單位如件、套或公斤來表示，會直接影響需要分配的資源和所需的生產時間。  

- **工作中心 (machine center / operation)** :   
工作中心代表一個特定的生產單位，可能由類似或相同類型的機台組成。  
通常對應於生產流程中的一個步驟。不同的工作中心有不同的生產能力和約束條件，需要進行有效的排程和資源分配以達到最佳生產效率。

- **生產步驟/工序/站點/作業順序/作業號碼** :  
對應一個料號的生產步驟(記錄方式可能像是0010, 0020, 0030...)，通常一個作業步驟會對應到一個工作中心

- **標準工時/作業時間 (Standard Time)** :  
標準工時是指完成一項特定工作(可能是一個生產步驟或一個產品生產週期)在標準條件下完成一定單位數量下所需花的時間，是生產排程和成本核算的重要依據

### 其他常見名詞說明
- **整備時間 (Setup Time)** :    
指將機台從上一個產品的生產狀態轉換為下一個產品所需的準備時間，可能包括清理、模具更換、機台調整等，通常不同料號/產品 之間所需要的整備時間不一樣

- **等候時間限制 (Queue Time Limit / Q-time)** :  
一個料號在兩個生產步驟間，根據製程與產品特性可能會設定中間能間隔的時間上限，若超過此時間限制必須重新加工或是報廢

- **搬運時間 (Handling Time)**  :  
從一個工作中心或工序搬運到下一個工作中心或工序所需的時間。

- **批量大小 (Batch Size)**  :  
批量大小是指每次生產過程中生產的產品數量，可能會跟製程類型、製具載具、製程間等有關連，  
進一步又可分成serial batching (s-batch) 或 parallel batching (p-batch) 

  |  | Serial Batching (S-Batch) | Parallel Batching (P-Batch)  |
  |-|-|-|
  | 處理方式 | 串行，依次處理每個工序 | 並行，不同工序同時處理  |
  | 適用情境 | 小批量生產，高精密度加工或品質管控要求高 | 大批量生產，多工序並行作業  |
  | 等候時間 | 高，下一工序等待前一工序完成 | 低，多個工序可以同時進行  |
  | 資源利用率 | 低，工序間可能存在空閒時間 | 高，資源同時運作，提高生產效率  |
  | 排程複雜度 | 低，相對簡單的排程管理 | 高，需要更複雜的生產計劃  |

- **部分轉移批量/重疊生產 (Transfer Batch Size / Overlapping Production)** :  
在生產過程中，當一個工序正在加工一個批次的部分數量時，不必等待整個批次全部完成就可以開始下一工序的加工。  
假設作業順序是 A → B  ，分別要花 4小時、2小時  
實際上在A站點時可能生產 3 小時(部分數量完成A的流程或累積一定數量單位) B站點就可以開始執行部分A的完成品，  
最終生產時間就會變成是 5 小時而非 4+2=6 小時  
特別適用於需要多道工序且每道工序處理時間差異較大的情況，例如金屬加工和電子裝配等行業  
可以減少在製品的數量和佔用空間，提高機台的利用率和整體生產線的流暢性，並靈活調整轉移批量的大小  


- **停機/禁線時間 (Downtime)** :  
生產機台、產線可能會有對應的**計劃性停機時間 (Planned Downtime)** 或 **非計劃性停機時間 (Unplanned Downtime)**  
代表機台或設備無法進行生產作業的特定時間段  
計畫性的停機可能包含例行預防性維護、預測性維護、設備保養、模具更換...  
非計劃性的停機（如機台故障、物料短缺、人力不足等） 



- 
 







-------------------------
### Backup:
- https://mosaik.readthedocs.io/en/latest/scheduler.html
